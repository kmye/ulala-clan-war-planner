(window["webpackJsonpreact-base"]=window["webpackJsonpreact-base"]||[]).push([[0],{216:function(e,a,t){e.exports=t(436)},221:function(e,a,t){},226:function(e,a,t){},436:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(7),o=t.n(l),c=(t(221),t(34)),i=(t(226),t(227),t(450)),s=t(442),u=t(210),p=t(44),y=t(45),m=t(68),d=t(64),f=t(13),E=t(449),h=t(71),v=t(29),g=t(70),P=t(443),b=t(72),O=t(440),I=t(445),T=t(446),k=t(448),A=t(447),j=t(200),w=t.n(j),C="Dps",x="Magic DPS",R="Tank",L="Support",S=[{id:1,name:"Assassin",type:C},{id:2,name:"Hunter",type:C},{id:3,name:"Gladiator",type:R},{id:4,name:"Warrior",type:R},{id:5,name:"Shaman",type:L},{id:6,name:"Warlock",type:x},{id:7,name:"Druid",type:L},{id:8,name:"Mage",type:x}],_=function(e){var a=null;for(var t in S){var n=S[t];if(n.name.trim()===e.trim()){a=n;break}}return{key:a.id,label:a.name}},F=function(e){var a=[];for(var t in S){var n=S[t];n.type===e&&a.push(n.id)}return a},D=["orange","orange","red","red","purple","purple","cyan","cyan"],Y=I.a.create({mapPropsToFields:function(e){var a=e.playerInput;if(null!=a)return{name:I.a.createFormField({value:a.name}),power:I.a.createFormField({value:a.power}),class:I.a.createFormField({value:a.class})}}})(function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).onCancel=function(){(0,e.props.onCancel)()},e.onSave=function(){var a=e.props,t=a.form,n=a.onSave,r=a.playerInput;t.validateFields((function(e,a){if(!e){var l=null!=r;l&&(a.playerIndex=r.playerIndex,a.teamType=r.teamType,a.teamIndex=r.teamIndex),n(a,l),t.resetFields()}}))},e}return Object(y.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(w.a,{title:"Input Player Data",visible:this.props.visible,okText:"Save",onOk:this.onSave,onCancel:this.onCancel},r.a.createElement(I.a,{layout:"vertical"},r.a.createElement(I.a.Item,{label:"Name"},e("name",{rules:[{required:!0,message:"Player name is required."},{pattern:new RegExp("^\\w*$"),message:"Player name must be alphanumeric input only."},{max:15,message:"Player name cannot exceed 15 characters"}]})(r.a.createElement(T.a,{allowClear:!0}))),r.a.createElement(I.a.Item,{label:"Power"},e("power",{rules:[{required:!0,message:"Power is required."}]})(r.a.createElement(k.a,{min:1}))),r.a.createElement(I.a.Item,{label:"Class"},e("class",{rules:[{required:!0,message:"Class is required."}]})(r.a.createElement(A.a,{showSearch:!0,labelInValue:!0,style:{width:200},placeholder:"Select class",optionFilterProp:"children",filterOption:function(e,a){return a.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},S.map((function(e){return r.a.createElement(A.a.Option,{key:e.id,value:e.id},e.name)})))))))}}]),t}(r.a.Component));Object(c.b)((function(e){return Object(f.a)({},e.playerInputForm)}))(Y);var U=function(e){return{type:"PLAYER_UPDATE",payload:{player:e}}},N=function(e){return{type:"PLAYER_UNASSIGN",payload:{player:e}}},B=t(67),M=t(439),q=t(453),W=t(444),G=t(451),J="PLAYER";function V(e){var a=Object(G.a)({item:{type:J,playerObject:e.value},collect:function(e){return{isDragging:!!e.isDragging()}}}),t=Object(B.a)(a,2),n=t[0].isDragging,l=t[1],o=null!=e.value.teamIndex?r.a.createElement(g.a,{type:"dashed",icon:"check",onClick:function(){e.onUnassignPlayerClick(e.value)}}):"",c="";c=e.shouldRenderActions?r.a.createElement("span",null,o,r.a.createElement(g.a,{type:"dashed",icon:"edit",onClick:function(){e.onUpdatePlayerClick(e.value)}}),r.a.createElement(M.a,{title:"Are you sure delete this record?",onConfirm:function(){e.onDeletePlayerClick(e.value.playerIndex)},onCancel:function(){},okText:"Yes",cancelText:"No"},r.a.createElement(g.a,{type:"dashed",icon:"delete"}))):r.a.createElement("span",null,o);var i=D[e.value.class.key-1],s=r.a.createElement("div",{style:{position:"absolute",right:0}},r.a.createElement(q.a,{color:i},e.value.class.label));return r.a.createElement("div",{ref:l,style:{opacity:n?.5:1,cursor:"move"}},r.a.createElement(W.a,{style:{width:"auto",marginTop:5,minWidth:270},title:"(".concat(e.value.playerIndex+1,") ").concat(e.value.name),extra:c},r.a.createElement(h.a,null,r.a.createElement(v.a,{span:12},e.value.power.toLocaleString()),r.a.createElement(v.a,{span:12},s))))}var H=t(206);function K(e){return e.replace(/"/g,"")}var $=new(function(){function e(){Object(p.a)(this,e)}return Object(y.a)(e,[{key:"processRows",value:function(e){return e.split(/\n/g).map((function(e,a){if(0!==a){var t=e.split(",");return{name:K(t[0]),power:K(t[1]),class:_(K(t[2]))}}}))}}]),e}()),z=function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(p.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).openPlayerInputForm=function(){e.props.openForm(null)},e.closePlayerInputForm=function(){e.props.closeForm()},e.formRef=function(a){e.playerInputForm=a},e.savePlayerInfo=function(a,t){t?e.props.updatePlayer(a):e.props.addPlayer(a),e.props.closeForm()},e.updatePlayerClick=function(a){e.props.openForm(a)},e.unassignPlayerClick=function(a){e.props.unassignPlayer(a)},e.deletePlayerClick=function(a){e.props.deletePlayer(a)},e.sortPlayersAscending=function(){e.props.sortPlayersByPower(!0)},e.sortPlayersDescending=function(){e.props.sortPlayersByPower(!1)},e.autoAssign=function(){E.a.loading("Work in progress..."),e.props.autoAssignPlayers()},e.exportData=function(){var a=e.props.players.map((function(e){return console.log(e),void 0===e.teamIndex?{name:e.name,power:e.power,class:e.class.label,team:""}:{name:e.name,power:e.power,class:e.class.label,team:e.teamType+" - Team "+(e.teamIndex+1)}}));new H.ExportToCsv({fieldSeparator:",",quoteStrings:'"',decimalSeparator:".",showLabels:!0,showTitle:!1,useTextFile:!1,useBom:!0,useKeysAsHeaders:!0}).generateCsv(a)},e.renderAddPlayerButton=function(){var a=e.props,t={name:"file",accept:".csv,application/vnd.ms-excel",action:"#",showUploadList:!1,onChange:function(e){if("uploading"!==e.file.status){var t=new FileReader;t.addEventListener("load",(function(e){a.clearPlayers(),$.processRows(e.target.result).forEach((function(e){a.addPlayer(e)}))})),t.readAsText(e.file)}"done"===e.file.status?console.log("done"):"error"===e.file.status&&E.a.error("Oops, there is an error.")},beforeUpload:function(e){return!1}};return r.a.createElement(h.a,{gutter:8},r.a.createElement(v.a,{span:12},r.a.createElement(g.a,{type:"primary",icon:"plus",shape:"round",onClick:e.openPlayerInputForm},"Add")),r.a.createElement(v.a,{span:12},r.a.createElement(P.a,t,r.a.createElement(g.a,{type:"primary",icon:"import",shape:"round"},"Import"))))},e}return Object(y.a)(t,[{key:"componentDidMount",value:function(){this.props.initPlayers()}},{key:"render",value:function(){var e=this,a="",t="",n=0,l=null!=this.props.players&&this.props.players.length>0;return l?(n=this.props.players.length,a=this.props.players.map((function(a,t){return r.a.createElement(V,{key:t,value:a,shouldRenderActions:!0,onUnassignPlayerClick:e.unassignPlayerClick,onUpdatePlayerClick:e.updatePlayerClick,onDeletePlayerClick:e.deletePlayerClick})})),t=r.a.createElement(v.a,null,r.a.createElement(g.a,{type:"default",icon:"sort-ascending",onClick:this.sortPlayersAscending}),r.a.createElement(g.a,{type:"default",icon:"sort-descending",onClick:this.sortPlayersDescending}),r.a.createElement(g.a,{type:"default",icon:"solution",onClick:this.autoAssign}),r.a.createElement(g.a,{type:"default",icon:"export",onClick:this.exportData},"Export to CSV"))):a=r.a.createElement("div",{style:{display:"flex",alignItems:"center",height:"80vh"}},r.a.createElement(b.a,{description:"Get started by adding players."},this.renderAddPlayerButton())),r.a.createElement("div",{style:{padding:"20px 20px"}},r.a.createElement("h3",null,"Players",l&&"("+n+"/80)"),l&&this.renderAddPlayerButton(),r.a.createElement(O.a,null),r.a.createElement(h.a,null,t),r.a.createElement(h.a,{type:"flex",justify:"space-around",align:"top"},r.a.createElement(v.a,null,a)),r.a.createElement(Y,{wrappedComponentRef:this.formRef,playerInput:this.props.playerInput,onSave:this.savePlayerInfo,onCancel:this.closePlayerInputForm,visible:this.props.visible}))}}]),t}(r.a.Component),Q=Object(c.b)((function(e){return Object(f.a)(Object(f.a)({},e.playerInputForm),e.player)}),{openForm:function(e){return{type:"PLAYER_FORM_OPEN",payload:{playerInput:e}}},closeForm:function(){return{type:"PLAYER_FORM_CLOSE"}},initPlayers:function(){return{type:"PLAYER_INIT"}},addPlayer:function(e){return{type:"PLAYER_ADD",payload:{player:e}}},updatePlayer:U,deletePlayer:function(e){return{type:"PLAYER_REMOVE",payload:{playerIndex:e}}},clearPlayers:function(){return{type:"PLAYER_CLEAR"}},unassignPlayer:N,sortPlayersByPower:function(e){return{type:"PLAYER_SORT_BY_POWER",payload:{sortType:e}}},autoAssignPlayers:function(){return{type:"PLAYER_AUTO_ASSIGN"}}})(z),X=function(e){return e.player.players},Z=function(e,a){return function(e){for(var a=4-e.length,t=0;t<a;t++)e.push(null);return e}(e.filter((function(e){return e.teamIndex===a})))},ee=t(65),ae=t(454),te=t(452),ne=t(441),re=t(10);function le(e){var a,t=e.player,n=Object(G.a)({item:{type:J,playerObject:t},collect:function(e){return{isDragging:!!e.isDragging()}}}),l=Object(B.a)(n,2),o=l[0].isDragging,c=l[1];if(null!=t){var i=r.a.createElement(V,{value:t,onUnassignPlayerClick:function(){e.onUnassignPlayerClick(t)}}),s=D[t.class.key-1];a=r.a.createElement("div",{ref:c,style:{opacity:o?.5:1,cursor:"move"}},r.a.createElement(ne.a,{content:i,trigger:"hover"},r.a.createElement(re.a,{style:{color:s},type:"smile"})," ",t.playerIndex+1,r.a.createElement("p",null,t.name)))}else a=r.a.createElement(re.a,{type:"question"});return r.a.createElement(v.a,{span:6},a)}function oe(e){var a=0,t=0,n=e.team;null!=n.players&&n.players.forEach((function(e){null!=e&&++t,a+=e?parseInt(e.power):0}));var l=Object(te.a)({accept:J,drop:function(a){return e.updatePlayerToTeam(a.playerObject,n)},canDrop:function(){return t<4},collect:function(e){return{isOver:!!e.isOver()}}}),o=Object(B.a)(l,2),c=o[0].isOver,i=o[1],s=function(a){e.onUnassignPlayerClick(a)};return r.a.createElement("div",{ref:i},r.a.createElement(W.a,{style:{width:"auto",background:c?"#f6ffed":"white"},extra:r.a.createElement(ee.a,{placement:"top",title:"Power"},r.a.createElement(ae.a,{count:a.toLocaleString(),overflowCount:99999999,style:{backgroundColor:"#52c41a"}})),title:"Team ".concat(n.teamIndex+1)},r.a.createElement(h.a,null,n.players.map((function(e,a){return r.a.createElement(le,{key:a,player:e,onUnassignPlayerClick:s})})))))}var ce="DEFENSE",ie="ATTACK",se="ELITE",ue=function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).updatePlayerToTeam=function(a,t){a.teamIndex=t.teamIndex,a.teamType=t.teamType,e.props.updatePlayer(a)},e.onUnassignPlayerClick=function(a){e.props.unassignPlayer(a)},e}return Object(y.a)(t,[{key:"buildTeamTemplateByType",value:function(e,a,t){for(var n=function(e,a){return e.filter((function(e){return e.teamType===a}))}(this.props.players,a),r=[],l=0;l<t;l++)r.push({players:Z(n,l),teamType:a,teamIndex:l});return r}},{key:"renderTeam",value:function(e){var a=this,t=e&&1===e.length;return e.map((function(e,n){return r.a.createElement(v.a,{span:t?24:12,key:n},r.a.createElement(oe,{team:e,updatePlayerToTeam:a.updatePlayerToTeam,onUnassignPlayerClick:a.onUnassignPlayerClick}))}))}},{key:"renderInColumns",value:function(e,a,t){return r.a.createElement(h.a,{gutter:16,type:"flex",justify:"space-around",align:"top"},r.a.createElement(v.a,{span:9},r.a.createElement("h3",null,"Defense"),r.a.createElement(h.a,{gutter:16},this.renderTeam(e))),r.a.createElement(v.a,{span:6},r.a.createElement("h3",null,"Elite"),r.a.createElement(h.a,{gutter:16},this.renderTeam(a))),r.a.createElement(v.a,{span:9},r.a.createElement("h3",null,"Attack"),r.a.createElement(h.a,{gutter:16},this.renderTeam(t))))}},{key:"renderInRows",value:function(e,a,t){return r.a.createElement(h.a,{gutter:16,type:"flex",justify:"space-around",align:"top"},r.a.createElement(v.a,null,r.a.createElement("h3",null,"Defense"),this.renderTeam(e),r.a.createElement("h3",null,"Elite"),this.renderTeam(a),r.a.createElement("h3",null,"Attack"),this.renderTeam(t)))}},{key:"render",value:function(){var e=[],a=[],t=[];return null!=this.props.players&&(e=this.buildTeamTemplateByType(this.props.players,ce,8),a=this.buildTeamTemplateByType(this.props.players,ie,8),t=this.buildTeamTemplateByType(this.props.players,se,1)),this.props.display&&"TEAM_LIST_DISPLAY_IN_COL"===this.props.display?this.renderInColumns(e,t,a):this.renderInRows(e,t,a)}}]),t}(r.a.Component),pe=Object(c.b)((function(e){return Object(f.a)(Object(f.a)({},e.teamList),{},{players:X(e)})}),{updatePlayer:U,unassignPlayer:N})(ue),ye=i.a.Header,me=i.a.Footer,de=i.a.Sider,fe=i.a.Content;var Ee=Object(c.b)()((function(){return r.a.createElement(s.a,{backend:u.a},r.a.createElement(i.a,null,r.a.createElement(de,{width:300,style:{background:"#fff",overflow:"auto",height:"100vh",position:"fixed",left:0}},r.a.createElement(Q,null)),r.a.createElement(i.a,{style:{marginLeft:300,height:"100vh"}},r.a.createElement(ye,{className:"header",style:{background:"antiquewhite"}},r.a.createElement("h2",null,"Ulala Clan War Planner")),r.a.createElement(fe,{style:{margin:"10px",padding:"20px",background:"white",overflow:"auto"}},r.a.createElement(pe,null)),r.a.createElement(me,{className:"custom-footer"},"Developed by kmye \xa92021"))))})),he=t(43),ve=t(209),ge=t(211);function Pe(e){localStorage.setItem("PLAYER_MASTER",JSON.stringify(e))}function be(e,a){return a.filter((function(a,t){return t!==e})).map((function(e,a){return e.playerIndex=a,e}))}function Oe(e,a){return a.map((function(a,t){return t!==e.playerIndex?a:Object(f.a)(Object(f.a)({},a),e)}))}function Ie(e,a){return e.sort((function(e,t){return a?e.power-t.power:t.power-e.power})).map((function(e,a){return e.playerIndex=a,e}))}function Te(e){var a=Ie(e,!1),t=a.filter((function(e){return F(R).includes(e.class.key)})),n=a.filter((function(e){return F(C).includes(e.class.key)})),r=a.filter((function(e){return F(x).includes(e.class.key)})),l=a.filter((function(e){return F(L).includes(e.class.key)})),o=[],c=function(e,a,t){var n=e.shift();return n.teamIndex=a,n.teamType=t,n},i=function(a,i){var s=0;do{t.length>0&&(o.push(c(t,a,i)),++s),l.length>0&&(o.push(c(l,a,i)),++s),r.length>0&&(o.push(c(r,a,i)),++s),n.length>0&&(o.push(c(n,a,i)),++s),console.log(s)}while(s<4&&s>=e.length)};i(0,se);for(var s=0;s<8;++s)i(s,ie),i(s,ce);var u=a.filter((function(e){return void 0===e.teamIndex||null===e.teamIndex}));return[].concat(o,Object(ge.a)(u))}var ke=Object(he.b)({player:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"PLAYER_INIT":var t=localStorage.getItem("PLAYER_MASTER");return Object(f.a)(Object(f.a)({},e),{},{players:null==t?[]:JSON.parse(t)});case"PLAYER_CLEAR":return localStorage.setItem("PLAYER_MASTER",null),Object(f.a)(Object(f.a)({},e),{},{players:[]});case"PLAYER_ADD":var n=a.payload.player,r=e.players.slice();return n.playerIndex=r.length,r.push(n),Pe(r),Object(f.a)(Object(f.a)({},e),{},{players:r});case"PLAYER_UPDATE":var l=Oe(a.payload.player,e.players);return Pe(l),Object(f.a)(Object(f.a)({},e),{},{players:l});case"PLAYER_REMOVE":var o=be(a.payload.playerIndex,e.players);return Pe(o),Object(f.a)(Object(f.a)({},e),{},{players:o});case"PLAYER_SORT_BY_POWER":var c=a.payload.sortType,i=Ie(e.players,c);return Pe(i),Object(f.a)(Object(f.a)({},e),{},{players:i});case"PLAYER_AUTO_ASSIGN":var s=Te(e.players);return Pe(s),Object(f.a)(Object(f.a)({},e),{},{players:s});case"PLAYER_UNASSIGN":var u=a.payload.player;u.teamIndex=null,u.teamType=null;var p=Oe(u,e.players);return Pe(p),Object(f.a)(Object(f.a)({},e),{},{players:p});default:return e}},playerInputForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"PLAYER_FORM_OPEN":return Object(f.a)(Object(f.a)({},e),{},{playerInput:a.payload.playerInput,visible:!0});case"PLAYER_FORM_CLOSE":return Object(f.a)(Object(f.a)({},e),{},{visible:!1});default:return e}},teamList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"TEAM_INIT":return Object(f.a)(Object(f.a)({},e),{},{displayInRow:!0});default:return e}},router:ve.routerReducer}),Ae=Object(he.c)(ke);o.a.render(r.a.createElement(c.a,{store:Ae}," ",r.a.createElement(Ee,null)," "),document.getElementById("root"))}},[[216,1,2]]]);
//# sourceMappingURL=main.a44ff2a2.chunk.js.map